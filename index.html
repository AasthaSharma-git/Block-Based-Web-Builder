<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Block-Based Web Builder</title>

  <!-- Include Blockly -->
  <script src="https://unpkg.com/blockly@9.0.0/blockly.min.js"></script>

  <!-- Include custom blocks -->
  <script src="blocks/html_blocks.js"></script>
  <script src="blocks/css_blocks.js"></script>
  <script src="blocks/js_blocks.js"></script>

  <!-- Include JSZip for exporting as ZIP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>

  <!-- Include the main app script -->
  <script src="app.js" defer></script>

  <!-- Include custom styles -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header>
    Block-Based Web Builder
  </header>

  <div id="container">
    <!-- Sidebar with toggle buttons -->
    <div id="sidebar">
      <button id="fileManagerButton" class="sidebar-button">Files</button>
    </div>

    <!-- File Manager (initially hidden) -->
    <div id="fileManager">
      <h2>Files</h2>
      <div id="fileList">
          <!-- File items will be dynamically added here -->
      </div>
      
      <form id="addFileForm">
        <input type="text" id="newFileName" placeholder="File name" required />
        <select id="newFileType">
          <option value="html">HTML</option>
          <option value="js">JavaScript</option>
          <option value="css">CSS</option>
        </select>
        <button type="submit">Add</button>
      </form>
    </div>

    <!-- Blockly coding area (middle panel) -->
    <div id="blocklyArea">
      <div id="blocklyDiv"></div>
    </div>

<!-- Resizer between coding area and right pane -->
<div id="resizer"></div>

<div id="rightPane">
  <!-- Toggle buttons for switching views -->
  <div id="toggleButtons">
    <button id="showCodeButton" class="toggle-btn active">Show Code</button>
    <button id="showPreviewButton" class="toggle-btn">Show Preview</button>
     <button id="exportButton" class="toggle-btn">Export Project</button>
  </div>

  <!-- Generated Code Section -->
  <div id="generatedCodeSection">
    <h2>Generated Code</h2>
    <textarea id="generatedCode" readonly></textarea>
  </div>

  <!-- Live Preview Section -->
  <div id="previewSection" class="hidden">
    <h2>Live Preview</h2>
    <button onclick="openOutputInNewTab()">Open Output in New Tab</button>
    <iframe id="preview" srcdoc=""></iframe>
  </div>

</div>
</div>

   <!-- Toolbox XML -->
 <xml id="toolbox" style="display: none;">
  <category name="HTML" colour="#192BC2">
    <block type="html_doctype"></block>
    <block type="html_html"></block>
    <block type="html_head"></block>
    <block type="html_body"></block>
    <block type="html_heading"></block>
    <block type="html_p"></block>
    <block type="html_br"></block>
    <block type="html_button"></block>
    <block type="html_a"></block>
    <block type="html_img"></block>
    <block type="html_div"></block>
    <block type="html_table"></block>
    <block type="html_tr"></block>
    <block type="html_td"></block>
    <block type="html_ul"></block>
    <block type="html_ol"></block>
    <block type="html_li"></block>
    <block type="js_script"></block>
    <block type="html_attribute_id"></block>
    <block type="html_attribute_class"></block>
    <block type="html_attribute_style"></block>
    <block type="html_attribute_disabled"></block>
  </category>

  <category name="CSS" colour="#8EB140">
    <block type="css_color"></block>
    <block type="css_background_color"></block>
    <block type="css_font_size"></block>
    <block type="css_margin"></block>
    <block type="css_padding"></block>
    <block type="css_width"></block>
    <block type="css_height"></block>
    <block type="css_display"></block>
    <block type="css_position"></block>
  </category>

  <category name="JavaScript" colour="#FFAB19">
    <category name="Variables" colour="%{BKY_VARIABLES_HUE}">
      <block type="js_variable_declare"></block>
      <block type="js_variable_assign"></block>
      <block type="js_variable_increment"></block>
      <block type="variables_get">
        <field name="VAR">myVar</field>
      </block>
      <block type="variables_set">
        <field name="VAR">myVar</field>
        <value name="VALUE">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
      </block>
    </category>
    <category name="Functions" colour="%{BKY_PROCEDURES_HUE}">
      <block type="js_function_with_params"></block>
      <block type="js_function_call"></block>
    </category>
    <category name="Logic" colour="%{BKY_LOGIC_HUE}">
      <block type="js_if_elif_else"></block>
      <block type="js_comparison_operations"></block>
      <block type="js_logical_operations"></block>
      <block type="controls_if"></block>
    </category>
    <category name="Loops" colour="%{BKY_LOOPS_HUE}">
      <block type="js_for_loop"></block>
      <block type="controls_repeat_ext">
        <value name="TIMES">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
    </category>
    <category name="Math" colour="%{BKY_MATH_HUE}">
      <block type="js_math_operations"></block>
      <block type="math_number">
        <field name="NUM">0</field>
      </block>
      <block type="math_arithmetic"></block>
    </category>
    <category name="Text" colour="%{BKY_TEXTS_HUE}">
      <block type="text"></block>
      <block type="text_print"></block>
    </category>
    <category name="Functions Advanced" colour="#FFAB19">
      <block type="js_return"></block>
    </category>
    <category name="Event Listeners" colour="#FFAB19">
      <block type="js_event_listener"></block>
      <block type="js_event_listener_domcontentloaded"></block>
    </category>
    <category name="HTTP" colour="#FFAB19">
      <block type="js_http_get"></block>
    </category>
    <category name="Console" colour="#FFAB19">
      <block type="js_console_log"></block>
    </category>
    <category name="Alerts" colour="#FFAB19">
      <block type="js_alert"></block>
    </category>
    <category name="Number" colour="#FFAB19">
      <block type="number_input"></block>
    </category>
  </xml>
  </category>

</xml>  
</body>

</html>
